<html>

<head>
    <title>QuestNotes Log Editor</title>
    <link rel="stylesheet" href="./main.css">
</head>

<body>
    <div>
        <h1>QuestNotes Log Editor</h1>
        MMOTRPG <a href="https://www.questnotes.net/">QuestNotes</a>のログ編集支援ツールです。取得したログを下のテキストボックスに入力し、編集を押すとシステムメッセージを取り除く事が出来ます。
    </div>
    <div>
        <h4>設定</h4>
        <form name="form1"><input type="checkbox" name="equip" value="soubi">装備解除/装備関連を削除する
    </div>
    <div>
        <p>
            <h4>◇ログ入力欄◇</h4>
            <textarea id="inputlog" name="inputlog" cols="80" rows="20" placeholder="ここに取得したログをペーストしてください。"></textarea>
        </p>
        <p><button onclick="editText()" class="btn-flat-border" type="button">編集</button></p>
        </p>
    </div>
    <div>
        <!-- コピー対象要素とコピーボタン -->
        <p>
            <h4>◇編集済みログ◇</h4>
            <textarea id="copyTarget" type="text" cols="80" rows="20" placeholder="ここに編集されたログが出力されます。"></textarea>
        </p>
        <p><button onclick="copyToClipboard()" class="btn-flat-border" type="button">コピー</button></p>
    </div>

    <div>
        <details>
            <summary>削除されるシステムメッセージ一覧</summary>
            操作中のキャラクターは行動できません。|初期ボードに移動します。|指定したボードは直接参加できません。|自動スクロールを解除しました。|自動スクロールを有効にしました。|ルームに参加していると行動できません。|がログアウトしました。|がログインしました。|ボードイベント同期を開始しました。|ボードイベント同期中。|イベントは既に終了しました。|イベント同期が完了しました。|文章を更新しました。|クリップボードにコピーしました。|メッセージログを保存しました。|アクティブシーン|キャンセルしました。|所持数が最大を超えるため購入できません。|作戦（アクション）を保存しました。|作戦（リアクション）を保存しました。|ロールを変更しました。|ライセンスを更新しました。|共有を更新しました。|にレベルシンクしました。|レベルシンクを解除しました。|お気に入りを削除しました。|お気に入りに追加しました。|をブロックに追加しました。|ブロックを削除しました。|が公開されました！|内容が長すぎます。|変数保存|ボードの操作が禁止されました。|ボードの操作禁止が解除されました。|クエスト中は開くことができません。|イベント中は実行できません。|テキストを入力してください|コマンド一覧を表示する|パーティー参加者にメッセージを送る|地の文としてメッセージを送る|ダイスを振った結果を表示する|ルームから離脱する。|スクリーンショットを保存する|メッセージのログを保存する|で判定を追加することもできます。|セリフを保存しました。|複数の対象があるので、表示されているポップアップから選択してください。|他にログインしているパーティーキャラクターがいません。|この行動は地点指定です。|サウンドファイルの読み込みに失敗しました。|既にそのルームに参加しています。|常時プライベートを無効にしました。|別のイベントが呼び出されため、実行中のイベントが中断されました。|の入力を待機しています。|の読み込みに失敗しました。|複数の対象があるので、表示されているキャラクタータグから選択してください。
<h5>チェック時のみ削除</h5>
            の装備を解除しました。|を装備しました。
        </details>
    </div>
    <script>
        function copyToClipboard() {
            // コピー対象をJavaScript上で変数として定義する
            var copyTarget = document.getElementById("copyTarget");

            // コピー対象のテキストを選択する
            copyTarget.select();

            // 選択しているテキストをクリップボードにコピーする
            document.execCommand("Copy");

            // コピーをお知らせする
            alert("クリップボードにコピーしました。");
        }
    </script>
    <script>
        function editText() {
            var TargetString = document.getElementById("inputlog").value; //TargetStringにinputlogの中身を代入
            var flag = false; //flagの初期値を設定
            for( i=0; i<1; i++ ) {
                // 1番目のチェックボックスがチェックされているかを判定
                if (document.form1.elements[i].checked) {
                    flag = true; //装備品関連チェック有りの場合  
                    var ResString = TargetString.replace(/^.*(操作中のキャラクターは行動できません。|初期ボードに移動します。|指定したボードは直接参加できません。|自動スクロールを解除しました。|自動スクロールを有効にしました。|ルームに参加していると行動できません。|がログアウトしました。|がログインしました。|ボードイベント同期を開始しました。|ボードイベント同期中。|イベントは既に終了しました。|イベント同期が完了しました。|文章を更新しました。|クリップボードにコピーしました。|メッセージログを保存しました。|アクティブシーン|キャンセルしました。|所持数が最大を超えるため購入できません。|作戦（アクション）を保存しました。|作戦（リアクション）を保存しました。|ロールを変更しました。|ライセンスを更新しました。|共有を更新しました。|にレベルシンクしました。|レベルシンクを解除しました。|お気に入りを削除しました。|お気に入りに追加しました。|をブロックに追加しました。|ブロックを削除しました。|が公開されました！|内容が長すぎます。|変数保存|ボードの操作が禁止されました。|ボードの操作禁止が解除されました。|クエスト中は開くことができません。|イベント中は実行できません。|コマンド一覧を表示する|パーティー参加者にメッセージを送る|地の文としてメッセージを送る|ダイスを振った結果を表示する|ルームから離脱する。|スクリーンショットを保存する|メッセージのログを保存する|で判定を追加することもできます。|セリフを保存しました。|テキストを入力してください|複数の対象があるので、表示されているポップアップから選択してください。|他にログインしているパーティーキャラクターがいません。|この行動は地点指定です。|サウンドファイルの読み込みに失敗しました。|既にそのルームに参加しています。|常時プライベートを無効にしました。|の装備を解除しました。|を装備しました。|別のイベントが呼び出されため、実行中のイベントが中断されました。|の入力を待機しています。|の読み込みに失敗しました。|複数の対象があるので、表示されているキャラクタータグから選択してください。).*$(\r\n|\r|\n)?/gm, ""); //TargetStringを置換してResStringに代入◇装備品含む
                }
            }

            // 何も選択されていない場合の処理   
            if (!flag) {
                var ResString = TargetString.replace(/^.*(操作中のキャラクターは行動できません。|初期ボードに移動します。|指定したボードは直接参加できません。|自動スクロールを解除しました。|自動スクロールを有効にしました。|ルームに参加していると行動できません。|がログアウトしました。|がログインしました。|ボードイベント同期を開始しました。|ボードイベント同期中。|イベントは既に終了しました。|イベント同期が完了しました。|文章を更新しました。|クリップボードにコピーしました。|メッセージログを保存しました。|アクティブシーン|キャンセルしました。|所持数が最大を超えるため購入できません。|作戦（アクション）を保存しました。|作戦（リアクション）を保存しました。|ロールを変更しました。|ライセンスを更新しました。|共有を更新しました。|にレベルシンクしました。|レベルシンクを解除しました。|お気に入りを削除しました。|お気に入りに追加しました。|をブロックに追加しました。|ブロックを削除しました。|が公開されました！|内容が長すぎます。|変数保存|ボードの操作が禁止されました。|ボードの操作禁止が解除されました。|クエスト中は開くことができません。|イベント中は実行できません。|コマンド一覧を表示する|パーティー参加者にメッセージを送る|地の文としてメッセージを送る|ダイスを振った結果を表示する|ルームから離脱する。|スクリーンショットを保存する|メッセージのログを保存する|で判定を追加することもできます。|セリフを保存しました。|テキストを入力してください|複数の対象があるので、表示されているポップアップから選択してください。|他にログインしているパーティーキャラクターがいません。|この行動は地点指定です。|サウンドファイルの読み込みに失敗しました。|既にそのルームに参加しています。|常時プライベートを無効にしました。|別のイベントが呼び出されため、実行中のイベントが中断されました。|の入力を待機しています。|の読み込みに失敗しました。|複数の対象があるので、表示されているキャラクタータグから選択してください。).*$(\r\n|\r|\n)?/gm, ""); //TargetStringを置換してResStringに代入◇装備品含まず
            }
            document.getElementById('copyTarget').textContent = ResString; //copyTargetにResStringの内容を表示
            alert("編集を完了しました。"); //表示した事を通知
        }
    </script>
</body></html>
